"use strict";(self.webpackChunkdellace=self.webpackChunkdellace||[]).push([[5046],{65046:function(e,a,r){r.r(a);var s=r(1413),l=r(29439),t=r(45987),i=r(72791),o=r(77106),n=r(79286),c=r(58185),d=r(26517),u=r(59434),p=r(22339),m=r(39230),f=r(5439),h=r(87445),g=r(40077),v=r(80440),x=r(80184),Z=["applyImageCropper","label","apiEndPoints","name","defaultImageUrl","aspect","children"];a.default=function(e){var a=e.applyImageCropper,r=void 0===a||a,j=e.label,y=void 0===j?"":j,b=e.apiEndPoints,U=e.name,I=e.defaultImageUrl,A=(e.aspect,e.children),N=(0,t.Z)(e,Z),w=(0,m.$G)().t,C=(0,u.v9)(v.tT),E=(0,i.useState)(!1),L=(0,l.Z)(E,2),O=L[0],P=L[1],R=(0,i.useState)(),S=(0,l.Z)(R,2),T=S[0],k=S[1],z=(0,p.U$)(U),M=(0,l.Z)(z,3),B=M[0],D=M[1],F=M[2],G=(0,s.Z)((0,s.Z)({},B),N),$=(0,f.KO)();D&&D.touched&&D.error&&(G.error=!0,G.helperText=D.error),(0,i.useEffect)((function(){k(I||"".concat(g.Z.ADMIN_IMAGE_URL,"/logo-default.jpg"))}),[I]);var _=function(e){var a="image/jpeg"===e.type||"image/png"===e.type;a||(0,h.Z)({type:"error",message:w("text.common.imageOnlyMessgae")});var r=e.size/1024/1024<5;return r||(0,h.Z)({type:"error",message:w("text.common.imageSizeExceedingMessage")}),a&&r},K=function(e){if("uploading"===e.file.status)P(!0);else{var a=e.file,r=a.status,s=a.response;if("done"===r)!function(e,a){var r=new FileReader;r.addEventListener("load",(function(){return a(r.result)})),r.readAsDataURL(e)}(e.file.originFileObj,(function(e){P(!1),k(e)})),(0,h.Z)({type:"success",message:"Image uploaded successfully"}),F.setValue(s.data.basePath||s.data.basePathUrl);else if("error"===r){var l,t,i;P(!1),(0,h.Z)({type:"error",message:null===e||void 0===e||null===(l=e.fileList[0])||void 0===l||null===(t=l.response)||void 0===t?void 0:t.message,description:"".concat(e.file.name," file upload failed. ").concat(e.file.response.detail)}),-1!==(null===s||void 0===s||null===(i=s.detail)||void 0===i?void 0:i.search("authenticated"))&&(0,f.Pj)()}}},V=(0,x.jsxs)("div",{children:[O?(0,x.jsx)(o.Z,{}):(0,x.jsx)(n.Z,{}),(0,x.jsx)("div",{style:{marginTop:8},children:(0,x.jsxs)("div",{className:"my-auto text-center",children:[(0,x.jsx)("span",{className:"icon-camera"}),(0,x.jsx)("div",{className:"font-sm txt",children:"+ Upload Image"})]})})]});return r?(0,x.jsx)(c.Z.Item,{label:y,className:"flex-col",name:U,help:D.error&&null!==D&&void 0!==D&&D.error&&null!==D&&void 0!==D&&D.touched?D.error:"",validateStatus:G.error?"error":"success",children:(0,x.jsxs)(d.Z,(0,s.Z)((0,s.Z)({name:"file",type:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:b,beforeUpload:_,onChange:K,disabled:O},N),{},{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat($)},children:[T?O?(C.userRole,(0,x.jsx)(o.Z,{})):(0,x.jsx)("img",{src:T,alt:"avatar",style:{height:"100%"}}):V,A]}))}):(0,x.jsx)(c.Z.Item,{label:y,className:"flex-col",name:U,help:D.error&&null!==D&&void 0!==D&&D.error&&null!==D&&void 0!==D&&D.touched?D.error:"",validateStatus:G.error?"error":"success",children:(0,x.jsxs)(d.Z,(0,s.Z)((0,s.Z)({name:"file",type:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:b,beforeUpload:_,onChange:K},N),{},{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat($)},children:[T?O?"admin"===C.userRole?(0,x.jsx)(o.Z,{}):(0,x.jsx)(o.Z,{className:"text-white"}):(0,x.jsx)("img",{src:T,alt:"avatar",style:{height:"100%"}}):V,A]}))})}}}]);
//# sourceMappingURL=5046.3f48c910.chunk.js.map